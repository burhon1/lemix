{% extends 'atomic/theme.html' %}
{% load static %}


{% block title %}
Online darslar tahrirlash- Lemix
{% endblock %}


{% block style %}
<style>
    .cardPay {
        position: relative;
    }

    .cardPay:hover {
        border: 1px solid #5f63f2;

    }

    .cardPay:hover::after {
        content: "";
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        top: 0;
        border-radius: 5px;
        height: 100%;
        width: 100%;
        background-color: #5f63f288;
    }

    .feature-card--1 figcaption h5 {
        margin: 0 0 0.5rem 0 !important;
    }

    .feature-cards:hover {
        cursor: pointer;
        box-shadow: 0 0 5px #5f63f2;
    }

    .atbd-tab .tab-content p {
        font-size: 12px !important;
    }
    .v-num{
        font-size: 14px;
    }
    .application-faqs .panel-title a{
        font-size: 12px !important;
    }
    .forms-view{
        display: flex;
        flex-wrap: wrap;
    }
    .forms-view > .form-group{
        display: flex;
        align-items: center;
    }
    .table-responsive tr td>div{
        text-transform: none;
    }
    .atbd-select .select2-selection,
    .select2-container--default .select2-selection--single{
        height: 1.875rem;
padding: 0;
font-size: 12px;
line-height: 1.5;
-webkit-border-radius: 0.2rem;
border-radius: 0.2rem;
margin-right: 7px;
    }
</style>
{% endblock %}
{% block content %}


    <div class="container-fluid">
        <div class="row mt-3">
            <div class="col-lg-12">
                <div class="card card-horizontal card-default card-md mb-4">
                    <div class="card-header">
                        <h6  style="text-transform: none;">Video {{ action|default:"qo'shish" }}</h6>
                    </div>
                    <div class="card-body py-md-30">
                        <div class="horizontal-form">
                            <form action="#">
                                <div class="form-group row">
                                    <div class="col-sm-3 d-flex aling-items-center">
                                        <label for="inputName" class=" col-form-label color-dark fs-14 fw-500 align-center">Nomi</label>
                                    </div>
                                    <div class="col-sm-9">
                                        <input type="text" class="form-control ih-medium ip-light radius-xs b-light px-15" id="inputName" placeholder="Video dars nomini kiriting" value="{{ content.title }}">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <div class="col-sm-3 d-flex aling-items-center">
                                        <label for="element-text" class=" col-form-label color-dark fs-14 fw-500 align-center">Video havola manzili(url)ni kiriting yoki video faylni yuklang</label>
                                    </div>
                                    <div class="col-sm-9">
                                        <input type="text" class="form-control ih-medium ip-light radius-xs b-light px-15" id="element-text" placeholder="Video dars manzili(url)" value="{{ content.video_link }}">
                                    </div>
                                </div>
                                <div class="form-group row">
                                    <div class="col-sm-3 d-flex aling-items-center">
                                        <label for="formFile" class=" col-form-label color-dark fs-14 fw-500 align-center"></label>
                                    </div>
                                    <div class="col-sm-9">
                                        {% if content.video %}
                                            <a href="{{ content.video.url }}">{{ content.video }}</a>
                                        {% endif %}
                                        <input class="form-control ih-medium ip-light radius-xs b-light px-15" type="file" id="formFile">
                                    </div>
                                </div>
                                </div>
                                <div class="form-group row" style="min-height: 80px;">
                                    <div class="col-sm-3 d-flex aling-items-center">
                                        <label for="id_text" class=" col-form-label color-dark fs-14 fw-500 align-center">Matni</label>
                                    </div>
                                    <div class="col-sm-9">
                                <textarea class="form-control ih-medium ip-light radius-xs b-light px-15" id="id_text"  style="min-height: 80px;" placeholder="Video dars matni (Ixtiyoriy)" rows="5" cols="5">{{ content.text }}</textarea>
                                </div>
                                
                               
                            </div>
                            <div class="form-group row">
                                <div class="col-sm-3 d-flex aling-items-center">
                                    <label for="radio" class=" col-form-label color-dark fs-14 fw-500 align-center">Ko'rinish</label>
                                </div>
                                <div class="col-sm-9 ">
                                    <div class="radio-theme-default custom-radio mb-2">
                                        <input class="radio" type="radio" name="radio-default" value=0 {% if content.required %}check{% endif %} id="radio-un2">
                                        <label for="radio-un2">
                                            <span class="radio-text">Dars tugatilmasa keyingi dars ko'rinmasin</span>
                                        </label>
                                    </div>
                                    
                                    <div class="radio-theme-default custom-radio ">
                                        <input class="radio" type="radio" name="radio-default" value=0 {% if content.required is False %}check{% endif %} id="radio-un3">
                                        <label for="radio-un3">
                                            <span class="radio-text">Ixtiyoriy paytda ko'rinsin</span>
                                        </label>
                                    </div>

                                 </div>
                            </div>
                                
                            </form>
                        </div>
                    </div>
                </div>
                <!-- ends: .card -->

            
            <div class="col-lg-12">
                <div class="card card-horizontal card-default card-md mb-4">
                    <div class="card-header">
                        <h6  style="text-transform: none;">Qo'llanmalar</h6>
                    </div>
                    <div class="card-body py-md-30">
                      
                        <div class="atbd-tag-wrap">

                            <div class="atbd-upload">
                                <div class="atbd-upload__button mb-3">
                                    <a href="javascript:void(0)" class="btn btn-lg btn-outline-lighten btn-upload" onclick="$('#upload').click()"> <span data-feather="upload"></span> Yuklash</a>
                                        <input type="file"  name="upload" class="upload-one" id="upload">
                                </div>
                                <!-- <div class="atbd-upload__file"> -->
                                    <section class="progress-area d-flex flex-wrap"></section>
                                     <section class="uploaded-area d-flex flex-wrap">
                                        {% if resources %}
                                            {% for resource in resources %}
                                            <div class="fileM-single m-2">

                                                {% if resource.file %}
                                                <div class="fileM-card ">
                                                    <div class="card border-0">
                                                        <div class="card-body pb-40 pt-45">
                                                            <div class="fileM-img">
                                                                <img class="wh-50" src="{% static 'img/zip.png' %}" alt="">
                                                            </div>
                                                            <a href="{{ resource.file.url }}"> <p class="fileM-excerpt">{{ resource.file.name }} </p></a>
                                                            <span class="size">{{ resource.file.name}}</span>
                                                            <div class="fileM-action">
                                                                <div class="fileM-action__right ">
                                                                    <div class="dropdown dropleft position-absolute">
                                                                        <button class="btn-link border-0 bg-transparent p-0" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-vertical"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                                                                        </button>
                                                                        <div class="dropdown-menu">
                                                                            <a class="dropdown-item text-danger" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f00" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>O'chirish</a>                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    </div>
                                                {% else %}
                                                    <div class="fileM-card ">
                                                        <div class="card border-0">
                                                            <div class="card-body pb-40 pt-45">
                                                                <div class="fileM-img">
                                                                    <img class="wh-50" src="{% static 'img/zip.png' %}" alt="">
                                                                </div>
                                                                <a href="{{ resource.link }}"> <p class="fileM-excerpt">{{ resource.video_link }} </p></a>
                                                                <span class="size"></span>
                                                                <div class="fileM-action">
                                                                    <div class="fileM-action__right ">
                                                                        <div class="dropdown dropleft position-absolute">
                                                                            <button class="btn-link border-0 bg-transparent p-0" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-vertical"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                                                                            </button>
                                                                            <div class="dropdown-menu">
                                                                                <a class="dropdown-item text-danger" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f00" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>O'chirish</a>                        </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                {% endif %}
                                                
                                                </div>
                                            {% endfor %}
                                        {% endif %}

                                     </section>
                                    <!-- <ul> -->
                                        <!-- <li>
                                            <a href="#" class="file-name"><i class="las la-paperclip"></i> <span class="name-text">xxx.png<span></span></span></a>
                                            <a href="#" class="btn-delete"><i class="la la-trash"></i></a>
                                        </li>

                                        <li>
                                            <a href="#" class="file-name"><i class="las la-paperclip"></i> <span class="name-text">yyy.jpg<span></span></span></a>
                                            <a href="#" class="btn-delete"><i class="la la-trash"></i></a>
                                        </li> -->

                                    <!-- </ul> -->
                                <!-- </div> -->
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-12">
                <div class="card  shadow-lg pb-md-50 pb-30 mb-md-50 mb-30">
                    <div class="card-header px-30 pt-30 pb-25 border-bottom-0">
                        <h4 class="fw-500">FAQ (Eng ko'p beriladigan savollarga javob)</h4>
                    </div>
                    <div class="card-body pt-0">
                        <div class="application-faqs">
                            <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                                <!-- panel 1 -->
                                {% for faq in faqs %}
                                    <div class="panel panel-default">
                                        <div class="panel-heading" role="tab" id="headingOne-faq-{{faq.id}}">
                                            <h4 class="panel-title">
                                                <a data-toggle="collapse" data-parent="#accordion" href="#collapseOne-faq-{{faq.id}}" aria-expanded="true" aria-controls="collapseOne-faq-{{faq.id}}">
                                                    {{ forloop.counter }}. {{ faq.question }}
                                                </a>
                                            </h4>

                                        </div>
                                        <div id="collapseOne-faq-{{faq.id}}" class="panel-collapse collapse in show" role="tabpanel" aria-labelledby="headingOne-faq-{{faq.id}}">
                                            <div class="panel-body">
                                                <p class="mb-sm-35 mb-20">{{ faq.answer }}</p>
                                            
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                {% endfor %}
                              
                        </div>



                        <div class="modal-basic modal fade" id="modalBasicFaq" tabindex="-1" role="dialog" aria-hidden="true">


                            <div class="modal-dialog modal-md" role="document">
                                <div class="modal-content modal-bg-white ">
                                    <div class="modal-header">
                        
                        
                        
                                        <h6 class="modal-title">Savol-Javob qo'shish</h6>
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                            <span data-feather="x"></span></button>
                                    </div>
                                    <div class="modal-body">
                                        <div class="form-group">
                                            <label for="a10" class="il-gray fs-14 fw-500 align-center">Savol matni</label>
                                            <input type="text" class="form-control ih-small ip-light radius-xs b-light px-15" id="a10" placeholder="">
                                        </div>
                                        <div class="form-group form-element-textarea mb-20">
                                            <label for="a11" class="il-gray fs-14 fw-500 align-center">Javob matni</label>
                                            <textarea class="form-control" id="a11" rows="3"></textarea>
                                        </div>
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">Bekor qilish</button>
                                        <button type="button" class="btn btn-primary btn-sm " onClick="saveFAQs('{{content.id}}')">Qo'shish</button>
                                    </div>
                                </div>
                            </div>
                                   
                        </div>
 
                        <button class="btn btn-primary btn-xs mt-3"  data-toggle="modal" data-target="#modalBasicFaq">+ Qo'shish</button>
                    </div>
                </div>
            </div> 
            
            <div class="col-lg-12">
                <div class="card card-horizontal card-default card-md mb-4">
                    <div class="card-header">
                        <h6  style="text-transform: none;">Ushbu darsni saqlaysizmi?</h6>
                    </div>
                    <div class="card-body py-md-30">
                        <div class="atbd-button-list d-flex flex-wrap">
                            <button class="btn btn-outline-secondary btn-default btn-squared " data-toggle="modal" data-target="#modal-basic-delete">Bekor qilish </button>
                            <button class="btn btn-outline-primary btn-default btn-squared" data-toggle="modal" data-target="#modal-basic-draft">Draft
                            </button>
                            <button class="btn btn-primary btn-default btn-squared " data-toggle="modal" data-target="#modal-basic-saqlash">Saqlash
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>




<div class="overlay-dark"></div>
<div class="overlay-dark-l2"></div>
</div>

{% endblock %}

{% block model %}
<div class="modal-basic modal fade show" id="modal-basic" tabindex="-1" role="dialog" aria-hidden="true">


    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content modal-bg-white ">
            <div class="modal-header">



                <h6 class="modal-title">Lidni o'chirish</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span data-feather="x"></span></button>
            </div>
            <div class="modal-body">
                <p>Ushbu arxivdagi lidni haqiqatdan ham o'chirmoqchimisiz?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary btn-sm">Ha, o'chirilsin</button>
                <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">Bekor qilish</button>
            </div>
        </div>
    </div>


</div>
<div class="modal-basic modal fade show" id="modal-basic1" tabindex="-1" role="dialog" aria-hidden="true">


    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content modal-bg-white ">
            <div class="modal-header">



                <h6 class="modal-title">Lidni avtivlashtirish.</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span data-feather="x"></span></button>
            </div>
            <div class="modal-body">
                <p>Ushbu lid avtiv lidlar qatoriga kiritilsinmi?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary btn-sm">Ha</button>
                <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">Yoq</button>
            </div>
        </div>
    </div>


</div>





<div class="modal-basic modal fade show" id="modal-basic-delete" tabindex="-1" role="dialog" aria-hidden="true">


    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content modal-bg-white ">
            <div class="modal-header">



                <h6 class="modal-title">O'chirish</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span data-feather="x"></span></button>
            </div>
            <div class="modal-body">
                <p>Ushbu dars uchun kiritilgan barcha ma'lumotlar o'chiriladi</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">Bekor qilish</button>
                <button type="button" class="btn btn-primary btn-sm">Ha, o'chirilsin</button>
            </div>
        </div>
    </div>


</div>
<div class="modal-basic modal fade show" id="modal-basic-draft" tabindex="-1" role="dialog" aria-hidden="true">


    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content modal-bg-white ">
            <div class="modal-header">



                <h6 class="modal-title">Draft</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span data-feather="x"></span></button>
            </div>
            <div class="modal-body">
                <p>Ushbu dars uchun kiritilgan ma'lumotlar tizimda saqlanadi, ammo o'quvchilar uchum joriy etilmaydi. 
                    </p>
                    <p>
                    Siz darsni tahrirlab yoki o'zgartirishlar kiritib bo'lganingizdan keyin saqlash tugmasini bossangiz bu dars faollashadi.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">Bekor qilish</button>
                <button type="button" class="btn btn-primary btn-sm">Draft saqlash</button>
            </div>
        </div>
    </div>


</div>
<div class="modal-basic modal fade show" id="modal-basic-saqlash" tabindex="-1" role="dialog" aria-hidden="true">


    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content modal-bg-white ">
            <div class="modal-header">



                <h6 class="modal-title">Saqlash</h6>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span data-feather="x"></span></button>
            </div>
            <div class="modal-body">
                <p>Ushbu dars uchun kiritgan barcha ma'lumotlar saqlanadi va o'quvchilarga ko'rinadi.</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary btn-sm" data-dismiss="modal">Bekor qilish</button>
                <button type="button" class="btn btn-primary btn-sm">Ha, Saqlash</button>
            </div>
        </div>
    </div>


</div>
{% endblock %}

{% block script %}
<script>


  


    var forms = document.querySelectorAll('.forms-view')
    for (let i = 0; i < forms.length; i++) {
         forms[i].style.display='none'
        }
    var array=[]
    function handleClickIcon(x) {
        if(array.includes(x)){
        forms[array[array.indexOf(x)]].style.display='none';
        array = array.filter(e=>e!=x);
        }
        else {
        forms[x].style.display='flex';
        array.push(x)
        }
       console.log(array)
    //   forms.forEach((e)=>  console.log(e.innerHTML=''))
    }
    // file upload
    const form = document.querySelector("form"),
fileInput = document.querySelector("#upload"),
progressArea = document.querySelector(".progress-area"),
uploadedArea = document.querySelector(".uploaded-area");

form.addEventListener("click", () =>{
fileInput.click();
});

fileInput.onchange = ({target})=>{
let file = target.files[0];
if(file){
let fileName = file.name;
if(fileName.length >= 12){
  let splitName = fileName.split('.');
  fileName = splitName[0].substring(0, 13) + "... ." + splitName[1];
}
uploadFile(fileName);
}
}

function uploadFile(name){
let xhr = new XMLHttpRequest();
xhr.open("POST", "php/upload.php");
xhr.upload.addEventListener("progress", ({loaded, total}) =>{
let fileLoaded = Math.floor((loaded / total) * 100);
let fileTotal = Math.floor(total / 1000);
let fileSize;
(fileTotal < 1024) ? fileSize = fileTotal + " KB" : fileSize = (loaded / (1024*1024)).toFixed(2) + " MB";
let progressHTML = `<li class="row">
                      <i class="fas fa-file-alt"></i>
                      <div class="content">
                        <div class="details">
                          <span class="name">${name} â€¢ Uploading</span>
                          <span class="percent">${fileLoaded}%</span>
                        </div>
                        <div class="progress-bar">
                          <div class="progress" style="width: ${fileLoaded}%"></div>
                        </div>
                      </div>
                    </li>`;
uploadedArea.classList.add("onprogress");
progressArea.innerHTML = progressHTML;
if(loaded == total){
  progressArea.innerHTML = "";
  let uploadedHTML = `
  <div class="fileM-single m-2">

<div class="fileM-card ">
<div class="card border-0">
    <div class="card-body pb-40 pt-45">
        <div class="fileM-img">
            <img class="wh-50" src="img/zip.png" alt="">
        </div>
        <p class="fileM-excerpt">${name} </p>
        <span class="size">${fileSize}</span>
        <div class="fileM-action">
            <div class="fileM-action__right ">
                <div class="dropdown dropleft position-absolute">
                    <button class="btn-link border-0 bg-transparent p-0" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-vertical"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>
                    </button>
                    <div class="dropdown-menu">
                        <a class="dropdown-item text-danger" href="#"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#f00" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>O'chirish</a>                        </div>
                </div>
            </div>
        </div>
    </div>
</div>
</div>

</div>
`;
  uploadedArea.classList.remove("onprogress");
  uploadedArea.insertAdjacentHTML("afterbegin", uploadedHTML);
}
});
let data = new FormData(form);
xhr.send(data);
}

var counter =0;
function addFAQ(){

    var question = document.getElementById('a10').value;
    var answer = document.getElementById('a11').value;
    if (question != "" && answer != ""){
        const faq_cards = document.getElementById('accordion');
        
        const div = document.createElement('div');
        div.className = 'panel panel-default created';
        var element = `
            <div class="panel-heading" role="tab" id="headingOne-${counter}">
                <h4 class="panel-title">
                    <a class="faq question" data-toggle="collapse" data-parent="#accordion" href="#collapseOne-${counter}" aria-expanded="true" aria-controls="collapseOne-${counter}">
                        ${question}
                    </a>
                </h4>

            </div>
            <div id="collapseOne-${counter}" class="panel-collapse collapse in show" role="tabpanel" aria-labelledby="headingOne-${counter}">
                <div class="panel-body">
                    <p class="mb-sm-35 mb-20 faq answer">${ answer }</p>
                    
                    </div>
                </div>
            </div>
        `
        counter++;
        div.innerHTML = element;
        faq_cards.appendChild(div);
        console.log("FAQ Added");
    }
    
    console.log("AddFaq()");
    
    }


function saveFAQs(id=null){
    addFAQ();
    if(id != null || id != ''){
        console.log("id: ", id);
        var url = `/education/faqs/?content=${id}`;
        var formData = new FormData();

        var created_faqs = document.getElementsByClassName('panel panel-default created');

        formData.append('form-TOTAL_FORMS', created_faqs.length);
        formData.append('form-INITIAL_FORMS', '0');
        formData.append('form-MAX_NUM_FORMS', created_faqs.length);
        
        for(var i=0; i< created_faqs.length; i++){
            var question = created_faqs[i].getElementsByClassName('faq question')[0].textContent;
            var answer   = created_faqs[i].getElementsByClassName('faq answer')[0].textContent; 
            formData.append(`form-${i}-question`, question);
            formData.append(`form-${i}-answer`, answer);
            formData.append(`form-${i}-content`, id);

        }
        formData.append('csrftokenmiddleware', '{{ csrf_token }}');
        fetch(url, {
            method: 'post',
            headers: {
                'X-CSRFToken': '{{ csrf_token }}',
            },
            body: formData,
        })
        .then(res=>res.json())
        .then(res=>{
            console.log(`Savol-javoblar saqlandi.`, res);
            for(var i=0; i< created_faqs.length; i++){
                created_faqs[i].classList.remove('created');
            }
        })
        .catch(err=>{
            console.log(`Savol-javoblar saqlanmadi: ${err}`);
        })

        console.log("finished");
    }
}


function deleteFAQ(id=null){
    if(id === null){

    } else{

    }
}

function addResource(){}

function saveResources(id=null){
    if(id === null){

    } else{

    }
}

function deleteResource(id=null){
    if(id === null){

    } else{

    }
}

function saveContent(id){
    var url = `/education/online_video/create/${id}/`;

    var formData = new FormData();
    var video = document.getElementById('element-text').value;
    if (video != null ){
        formData.append('video', video, video.name);
    }
    formData.append('title', document.getElementById('inputName').value);
    formData.append('video_link', document.getElementById('element-text').value);
    formData.append('text', document.getElementById('id_text').value);
    formData.append('csrftokenmiddleware', '{{ csrf_token }}');

    fetch(url, {
        method: 'post',
        headers: {
            'X-CSRFToken': '{{ csrf_token }}',
        },
        body: formData,
    })
    .then(res=>res.json())
    .then(res=>{
        console.log(res);
        saveFAQs(res.id);
        saveResources(res.id);
        deleteFAQs(res.id);
        deleteResources(res.id);
    })
    .catch(err=>{
        console.log(err);
    })


}


</script>

{% endblock %}